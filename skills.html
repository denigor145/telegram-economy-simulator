<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–º–µ–Ω–∏—è - –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —Å–∏–º—É–ª—è—Ç–æ—Ä</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; 
            color: white; 
            padding: 20px;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        .skill-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .skill-card.equipped {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.2);
        }
        .skill-card:not(.equipped):hover {
            background: rgba(255,255,255,0.2);
        }
        .skill-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        .skill-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .skill-description {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 8px;
        }
        .skill-stats {
            font-size: 11px;
            opacity: 0.7;
        }
        .skill-level {
            margin-top: 5px;
            font-size: 12px;
            color: #FFD700;
        }
        .equipped-slots {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        .equipped-title {
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .btn-back {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            width: 100%;
        }
        .upgrade-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 5px;
            font-size: 10px;
        }
        .upgrade-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ –£–º–µ–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü–∞</h1>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ 5 —É–º–µ–Ω–∏–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ</p>
        </div>

        <div class="equipped-slots">
            <div class="equipped-title">‚öîÔ∏è –ê–∫—Ç–∏–≤–Ω—ã–µ —É–º–µ–Ω–∏—è (5 —Å–ª–æ—Ç–æ–≤)</div>
            <div id="equippedCount">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 0/5</div>
        </div>

        <div class="skills-grid" id="skillsGrid">
            <!-- –£–º–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>

        <button class="btn-back" onclick="goToMainMenu()">–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
    </div>

    <script src="js/skills-data.js"></script>
    <script>
        let equippedSkillsCount = 0;

        function loadSkills() {
            const skillsGrid = document.getElementById('skillsGrid');
            skillsGrid.innerHTML = '';

            // –°—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∏–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É–º–µ–Ω–∏–π
            equippedSkillsCount = skills.filter(skill => skill.equipped).length;
            document.getElementById('equippedCount').textContent = `–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: ${equippedSkillsCount}/5`;

            skills.forEach(skill => {
                const skillCard = document.createElement('div');
                skillCard.className = `skill-card ${skill.equipped ? 'equipped' : ''}`;
                skillCard.onclick = () => toggleSkill(skill.id);

                skillCard.innerHTML = `
                    <div class="skill-icon">${skill.icon}</div>
                    <div class="skill-name">${skill.name}</div>
                    <div class="skill-description">${skill.description}</div>
                    <div class="skill-stats">
                        –°–∏–ª–∞: ${skill.power} | –°—Ç–æ–∏–º–æ—Å—Ç—å: ${skill.enduranceCost} | –®–∞–Ω—Å: ${Math.round(skill.successChance * 100)}%
                    </div>
                    <div class="skill-level">–£—Ä–æ–≤–µ–Ω—å: ${skill.level}/${skill.maxLevel}</div>
                    <button class="upgrade-btn" onclick="event.stopPropagation(); upgradeSkill(${skill.id})" 
                            ${skill.level >= skill.maxLevel ? 'disabled' : ''}>
                        –£–ª—É—á—à–∏—Ç—å
                    </button>
                `;

                skillsGrid.appendChild(skillCard);
            });
        }

        function toggleSkill(skillId) {
            const skill = skills.find(s => s.id === skillId);
            
            if (skill.equipped) {
                // –°–Ω–∏–º–∞–µ–º —É–º–µ–Ω–∏–µ
                skill.equipped = false;
                equippedSkillsCount--;
            } else {
                // –ù–∞–¥–µ–≤–∞–µ–º —É–º–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã
                if (equippedSkillsCount < 5) {
                    skill.equipped = true;
                    equippedSkillsCount++;
                } else {
                    alert('–í—Å–µ —Å–ª–æ—Ç—ã –∑–∞–Ω—è—Ç—ã! –°–Ω–∏–º–∏—Ç–µ –¥—Ä—É–≥–æ–µ —É–º–µ–Ω–∏–µ —Å–Ω–∞—á–∞–ª–∞.');
                    return;
                }
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
            saveSkills();
            loadSkills();
        }

        function upgradeSkill(skillId) {
            const skill = skills.find(s => s.id === skillId);
            if (skill.level < skill.maxLevel) {
                skill.level++;
                // –£–ª—É—á—à–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É)
                skill.power = Math.round(skill.power * 1.1);
                skill.successChance = Math.min(skill.successChance + 0.02, 0.95);
                
                saveSkills();
                loadSkills();
                alert(`–£–º–µ–Ω–∏–µ "${skill.name}" —É–ª—É—á—à–µ–Ω–æ –¥–æ —É—Ä–æ–≤–Ω—è ${skill.level}!`);
            }
        }

        function saveSkills() {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('playerSkills', JSON.stringify(skills));
        }

        function loadSavedSkills() {
            const savedSkills = localStorage.getItem('playerSkills');
            if (savedSkills) {
                const parsedSkills = JSON.parse(savedSkills);
                // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—à –º–∞—Å—Å–∏–≤ skills —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
                parsedSkills.forEach(savedSkill => {
                    const skillIndex = skills.findIndex(s => s.id === savedSkill.id);
                    if (skillIndex !== -1) {
                        skills[skillIndex] = { ...skills[skillIndex], ...savedSkill };
                    }
                });
            }
        }

        function goToMainMenu() {
            window.location.href = 'index.html';
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —É–º–µ–Ω–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º
        loadSavedSkills();
        loadSkills();
    </script>
</body>
</html>